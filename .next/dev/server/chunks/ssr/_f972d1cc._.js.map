{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/carlo/MenuQR/components/ImageUpload.tsx"],"sourcesContent":["\"use client\";\n\nimport { UploadButton } from \"@uploadthing/react\";\nimport type { OurFileRouter } from \"@/app/api/uploadthing/core\";\n\ninterface ImageUploadProps {\n  onUploadComplete: (url: string) => void;\n}\n\nexport default function ImageUpload({ onUploadComplete }: ImageUploadProps) {\n  return (\n    <UploadButton<OurFileRouter, \"imageUploader\">\n      endpoint=\"imageUploader\"\n      onClientUploadComplete={(res) => {\n        if (res && res[0]) {\n          onUploadComplete(res[0].url);\n        }\n      }}\n      onUploadError={(error: Error) => {\n        console.error(\"Upload error:\", error);\n        alert(\"Upload failed\");\n      }}\n    />\n  );\n}\n\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AASe,SAAS,YAAY,EAAE,gBAAgB,EAAoB;IACxE,qBACE,8OAAC,uLAAY;QACX,UAAS;QACT,wBAAwB,CAAC;YACvB,IAAI,OAAO,GAAG,CAAC,EAAE,EAAE;gBACjB,iBAAiB,GAAG,CAAC,EAAE,CAAC,GAAG;YAC7B;QACF;QACA,eAAe,CAAC;YACd,QAAQ,KAAK,CAAC,iBAAiB;YAC/B,MAAM;QACR;;;;;;AAGN"}},
    {"offset": {"line": 35, "column": 0}, "map": {"version":3,"sources":["file:///Users/carlo/MenuQR/app/dashboard/menu/%5BmenuId%5D/add-item/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport { useRouter, useParams } from \"next/navigation\";\nimport Link from \"next/link\";\nimport ImageUpload from \"@/components/ImageUpload\";\n\nexport default function AddItemPage() {\n  const router = useRouter();\n  const params = useParams();\n  const menuId = params.menuId as string;\n\n  const [name, setName] = useState(\"\");\n  const [price, setPrice] = useState(\"\");\n  const [description, setDescription] = useState(\"\");\n  const [imageUrl, setImageUrl] = useState(\"\");\n  const [categoryId, setCategoryId] = useState(\"\");\n  const [categories, setCategories] = useState<\n    Array<{ id: string; name: string }>\n  >([]);\n\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(\"\");\n\n  useEffect(() => {\n    fetch(`/api/menus`)\n      .then((res) => res.json())\n      .then((menus) => {\n        const menu = menus.find((m: { id: string }) => m.id === menuId);\n        if (menu?.categories?.length) {\n          setCategories(menu.categories);\n          setCategoryId(menu.categories[0].id);\n        }\n      });\n  }, [menuId]);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError(\"\");\n    setLoading(true);\n\n    try {\n      const res = await fetch(\"/api/items\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          name,\n          price,\n          description,\n          imageUrl,\n          categoryId,\n        }),\n      });\n\n      if (res.ok) {\n        router.push(`/dashboard/menu/${menuId}`);\n      } else {\n        const data = await res.json();\n        setError(data.error || \"Failed to create item\");\n      }\n    } catch {\n      setError(\"Something went wrong\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"max-w-3xl mx-auto px-6 py-10\">\n\n      {/* BACK */}\n      <Link\n        href={`/dashboard/menu/${menuId}`}\n        className=\"inline-block mb-6 text-sm text-gray-500 hover:text-gray-900\"\n      >\n        ‚Üê Back to menu\n      </Link>\n\n      {/* TITLE */}\n      <h1 className=\"text-3xl font-semibold tracking-tight mb-10\">\n        Add item\n      </h1>\n\n      <form\n        onSubmit={handleSubmit}\n        className=\"bg-white border border-gray-200 rounded-2xl p-8 space-y-8\"\n      >\n        {error && (\n          <div className=\"border border-red-200 bg-red-50 text-red-700 rounded-lg px-4 py-3\">\n            {error}\n          </div>\n        )}\n\n        {/* CATEGORY */}\n        <div>\n          <label className=\"block text-sm font-medium mb-[1px]\">\n            Category\n          </label>\n          <select\n            required\n            value={categoryId}\n            onChange={(e) => setCategoryId(e.target.value)}\n            className=\"\n              w-full rounded-lg border border-gray-300 px-4 py-2\n              bg-white\n              focus:border-gray-900 focus:outline-none\n            \"\n          >\n            {categories.map((cat) => (\n              <option key={cat.id} value={cat.id}>\n                {cat.name}\n              </option>\n            ))}\n          </select>\n        </div>\n\n        {/* NAME */}\n        <div>\n          <label className=\"block text-sm font-medium mb-[1px]\">\n            Item name\n          </label>\n          <input\n            required\n            value={name}\n            onChange={(e) => setName(e.target.value)}\n            placeholder=\"e.g. Cappuccino\"\n            className=\"\n              w-full rounded-lg border border-gray-300 px-4 py-2\n              focus:border-gray-900 focus:outline-none\n            \"\n          />\n        </div>\n\n        {/* PRICE */}\n        <div>\n          <label className=\"block text-sm font-medium mb-[1px]\">\n            Price\n          </label>\n          <input\n            type=\"number\"\n            step=\"0.01\"\n            value={price}\n            onChange={(e) => setPrice(e.target.value)}\n            placeholder=\"Optional\"\n            className=\"\n              w-full rounded-lg border border-gray-300 px-4 py-2\n              focus:border-gray-900 focus:outline-none\n            \"\n          />\n        </div>\n\n        {/* DESCRIPTION */}\n        <div>\n          <label className=\"block text-sm font-medium mb-[1px]\">\n            Description\n          </label>\n          <textarea\n            rows={3}\n            value={description}\n            onChange={(e) => setDescription(e.target.value)}\n            placeholder=\"Optional description\"\n            className=\"\n              w-full rounded-lg border border-gray-300 px-4 py-2\n              focus:border-gray-900 focus:outline-none\n            \"\n          />\n        </div>\n\n        {/* IMAGE */}\n        <div className=\"space-y-[1px]\">\n          <label className=\"block text-sm font-medium\">\n            Image\n          </label>\n          <ImageUpload onUploadComplete={setImageUrl} />\n          {imageUrl && (\n            <img\n              src={imageUrl}\n              alt=\"Preview\"\n              className=\"mt-3 w-32 h-32 rounded-xl object-cover border\"\n            />\n          )}\n        </div>\n\n        {/* ACTIONS */}\n        <div className=\"flex items-center gap-4 pt-2\">\n          <button\n            type=\"submit\"\n            disabled={loading}\n            className=\"\n              bg-black text-white text-sm font-medium\n              px-6 py-2.5 rounded-lg\n              hover:bg-gray-800 transition\n              disabled:opacity-50\n            \"\n          >\n            {loading ? \"Creating...\" : \"Create item\"}\n          </button>\n\n          <Link\n            href={`/dashboard/menu/${menuId}`}\n            className=\"\n              px-6 py-2.5 rounded-lg text-sm\n              border border-gray-300\n              hover:border-gray-900 transition\n            \"\n          >\n            Cancel\n          </Link>\n        </div>\n      </form>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}